(function(e){function t(t){for(var a,o,c=t[0],i=t[1],u=t[2],d=0,f=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);l&&l(t);while(f.length)f.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(s.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},r={app:0},s=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/kaniwani/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=i;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),r=n.n(a);r.a},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("5530"),r=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),s=n("2f62"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/kaniwani"}},[e._v("Home")]),e._v("| "),n("router-link",{attrs:{to:"/kaniwani/study"}},[e._v("Study")])],1),n("router-view")],1)},c=[],i=(n("034f"),n("2877")),u={},l=Object(i["a"])(u,o,c,!1,null,null,null),d=l.exports,f=n("8c4f"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",{staticClass:"masthead text-white text-center"},[n("div",{staticClass:"overlay"}),n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[e._m(0),n("div",{staticClass:"col-md-10 col-lg-8 col-xl-7 mx-auto"},[n("form",{on:{submit:function(t){return t.preventDefault(),e.validateAccessToken(t)}}},[n("div",{staticClass:"form-row"},[n("div",{staticClass:"col-12 col-md-9 mb-2 mb-md-0"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.accessToken,expression:"accessToken"}],staticClass:"form-control form-control-lg",attrs:{placeholder:"Enter your personal access token..."},domProps:{value:e.accessToken},on:{input:function(t){t.target.composing||(e.accessToken=t.target.value)}}})]),n("div",{staticClass:"col-12 col-md-3"},[n("button",{staticClass:"btn btn-block btn-lg btn-primary",attrs:{type:"submit",disabled:!e.isValidAccessToken}},[e._v(" Let's go! ")])])]),e._m(1)])])])])])])},h=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-xl-9 mx-auto"},[n("h1",{staticClass:"mb-5"},[e._v(" Study Japanese given Hiragana with the help of "),n("a",{attrs:{href:"https://www.wanikani.com",target:"_blank"}},[e._v("WaniKani")])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-xl-12 mx-auto"},[n("p",{staticClass:"mt-3"},[e._v(" You can find your personal access token "),n("a",{attrs:{href:"https://www.wanikani.com/settings/personal_access_tokens",target:"_blank"}},[e._v("here")]),e._v(". ")]),n("p",[e._v(" Make sure to use the one for API version 2 (The one with the dashes). ")])])}],b=(n("ac1f"),n("466d"),n("4de4"),n("a15b"),n("d81d"),n("d3b7"),n("ddb0"),n("2909")),m=(n("96cf"),n("1da1")),p=n("bc3a"),w=n.n(p),g="https://api.wanikani.com/v2";function y(e){var t={Authorization:"Bearer "+e};return{headers:t}}function k(e){var t=w.a.get("".concat(g,"/user"),y(e)).then((function(e){var t=e.data;return t}));return t}function _(e,t){return A.apply(this,arguments)}function A(){return A=Object(m["a"])(regeneratorRuntime.mark((function e(t,n){var a,r,s,o,c,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=Object(b["a"])(Array(n).keys()).map((function(e){return e+1})).join(),r="".concat(g,"/subjects?types=vocabulary&levels=").concat(a),s=null,o=0;case 4:if(!(o<4)){e.next=14;break}return console.log("Get Vocabulary",r),e.next=8,w.a.get(r,y(t)).then((function(e){var t=e.data;return t}));case 8:c=e.sent,r=c.pages.next_url,null===s?s=c:(i=s.data).push.apply(i,Object(b["a"])(c.data));case 11:o++,e.next=4;break;case 14:return console.log(s),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function j(e,t){var n=_(e,t).then((function(e){for(var t={},n=0;n<e.data.length;n++)for(var a=e.data[n],r=a.data.readings.filter((function(e){return e.accepted_answer})),s=0;s<r.length;s++){var o=r[s].reading;o in t?t[o].push(a):t[o]=[a]}return t}));return n}var T={name:"Home",components:{},data:function(){return{accessToken:this.$store.state.accessToken}},computed:{isValidAccessToken:function(){return null!==this.accessToken.match("[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}")}},methods:Object(a["a"])({validateAccessToken:function(){var e=this;k(this.accessToken).then((function(){e.setAccessToken(e.accessToken),e.$router.push({path:"/kaniwani/study"})})).catch((function(e){return console.log(e)}))}},Object(s["b"])(["setAccessToken"]))},V=T,C=Object(i["a"])(V,v,h,!1,null,null,null),O=C.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("status"),n("form",{on:{submit:function(t){return t.preventDefault(),e.submitAnswers(t)}}},[e._l(e.givenAnswers,(function(t,a){return n("div",{key:a,staticClass:"row mb-3"},[n("div",{staticClass:"col-1"}),n("div",{staticClass:"col-10 justify-content-center col-auto"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"answer.value"}],ref:"answerField",refInFor:!0,staticClass:"form-control form-control-lg",staticStyle:{"text-align":"center"},attrs:{placeholder:"Enter a translation ...",required:""},domProps:{value:t.value},on:{input:function(n){n.target.composing||e.$set(t,"value",n.target.value)}}})]),n("div",{staticClass:"col-1"},[n("button",{staticClass:"btn btn-block btn-lg btn-danger",attrs:{type:"button"},on:{click:function(t){return e.removeAnswer(a)}}},[n("i",{staticClass:"fas fa-trash"})])])])})),n("hr"),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-2 mr-5"},[n("button",{staticClass:"btn btn-block btn-lg btn-primary",attrs:{type:"button"},on:{click:e.addAnswer}},[n("i",{staticClass:"fas fa-plus"})])]),e._m(0)])],2)],1)},$=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"col-2 ml-5"},[n("button",{staticClass:"btn btn-block btn-lg btn-success",attrs:{type:"submit"}},[n("i",{staticClass:"fas fa-arrow-right"})])])}],K=(n("a434"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h5",[e._v(" Hello "+e._s(e.username)+" (Level: "+e._s(e.level)+") | Kanas: "+e._s(e.numKanasToVocabulary)+" | Answered: "+e._s(e.numAnswered)+" ")]),n("div",{staticClass:"row justify-content-center mb-3"},[n("h2",[e._v(e._s(e.currentKana))])])])}),S=[],E={name:"Status",computed:{username:function(){return this.$store.state.username},level:function(){return this.$store.state.level},numKanasToVocabulary:function(){return this.$store.getters.getNumKanaToVocabulary},numAnswered:function(){return this.$store.state.numAnswered},currentKana:function(){return this.$store.state.currentKana}}},P=E,R=Object(i["a"])(P,K,S,!1,null,null,null),M=R.exports,N={name:"Study",components:{status:M},data:function(){return{givenAnswers:[{value:""}]}},mounted:function(){var e=this;this.$refs.answerField.length>0&&this.$nextTick((function(){return e.$refs.answerField[0].focus()}))},methods:Object(a["a"])({},Object(s["b"])(["giveAnswers"]),{addAnswer:function(){this.givenAnswers.push({value:""})},removeAnswer:function(e){1===this.givenAnswers.length?this.givenAnswers[0].value="":this.givenAnswers.splice(e,1)},submitAnswers:function(){this.giveAnswers(this.givenAnswers.map((function(e){return e.value}))),this.$router.push("/kaniwani/review").catch((function(e){if("NavigationDuplicated"!=e.name)throw e}))}})},z=N,D=Object(i["a"])(z,x,$,!1,null,null,null),H=D.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("status"),e._l(e.givenAnswers,(function(t,a){return n("div",{key:a,staticClass:"mb-3"},[n("div",{staticClass:"row justify-content-center mb-2"},[n("div",{staticClass:"col-10"},[n("input",{staticClass:"form-control form-control-lg",staticStyle:{"text-align":"center"},style:{borderColor:e.getVocabulary(t).length>0?"green":"red"},attrs:{disabled:""},domProps:{value:t}})])]),e._l(e.getVocabulary(t),(function(t,a){return n("div",{key:a},[n("answer",{attrs:{"current-kana":e.currentKana,vocabulary:t}}),n("hr",{attrs:{width:"50%"}})],1)}))],2)})),n("hr"),n("div",{directives:[{name:"show",rawName:"v-show",value:e.unansweredVocabulary.length>0,expression:"unansweredVocabulary.length > 0"}]},[e._m(0),e._l(e.unansweredVocabulary,(function(t,a){return n("div",{key:a},[n("answer",{attrs:{"current-kana":e.currentKana,vocabulary:t}}),n("hr",{attrs:{width:"50%"}})],1)})),n("hr")],2),n("div",{staticClass:"row justify-content-center"},[n("div",{staticClass:"col-2"},[n("button",{staticClass:"btn btn-block btn-lg btn-success",on:{click:e.finishReviewing}},[n("i",{staticClass:"fas fa-arrow-right"})])])])],2)},F=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("u",[e._v("Answers not given:")])])}],U=(n("b64b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h6",[e._v("Characters: "+e._s(e.vocabulary.data.characters))]),n("h6",[e._v("Meaning: "+e._s(e.getMeaningsWithAcceptedAnswers(e.vocabulary)))]),n("h6",[e._v(" Other readings: "+e._s(e.getOtherReadings(e.vocabulary))+" ")])])}),I=[],J={name:"Answer",props:{currentKana:{type:String,default:""},vocabulary:{type:Object,default:function(){return{data:{meanings:[],readings:[]}}}}},methods:{getMeaningsWithAcceptedAnswers:function(e){return e.data.meanings.filter((function(e){return e.accepted_answer})).map((function(e){return e.meaning})).join(", ")},getOtherReadings:function(e){var t=this,n=e.data.readings.filter((function(e){return e.accepted_answer&&e.reading!==t.currentKana})).map((function(e){return e.reading}));return 0===n.length?"None":n.join(", ")}}},W=J,q=Object(i["a"])(W,U,I,!1,null,null,null),B=q.exports,G={name:"Review",components:{answer:B,status:M},computed:{currentKana:function(){return this.$store.state.currentKana},givenAnswers:function(){return Object.keys(this.$store.state.givenAnswersToValidVocabulary)},givenAnswersToValidVocabulary:function(){return this.$store.state.givenAnswersToValidVocabulary},unansweredVocabulary:function(){return this.$store.state.unansweredVocabulary}},mounted:function(){var e=this;window.addEventListener("keypress",(function(t){13===t.keyCode&&e.finishReviewing()}))},methods:Object(a["a"])({},Object(s["b"])(["newKana"]),{getVocabulary:function(e){return this.$store.state.givenAnswersToValidVocabulary[e]},finishReviewing:function(){this.newKana(),this.$router.push("/kaniwani/study").catch((function(e){if("NavigationDuplicated"!=e.name)throw e}))}})},Y=G,Q=Object(i["a"])(Y,L,F,!1,null,null,null),X=Q.exports;r["a"].use(f["a"]);var Z=[{path:"/kaniwani",name:"Home",component:O},{path:"/kaniwani/study",name:"Study",component:H},{path:"/kaniwani/review",name:"Review",component:X}],ee=new f["a"]({routes:Z,mode:"history"}),te=ee,ne=(n("13d5"),n("ade3")),ae=n("7f37"),re=n.n(ae),se=(n("99af"),n("7db0"),n("6062"),n("3ca3"),n("b85c"));function oe(e,t){for(var n=[],a=0;a<t.length;a++){var r=t[a],s=r.data.meanings.filter((function(e){return e.accepted_answer})).find((function(t){return t.meaning.toLowerCase()===e.toLowerCase()}));void 0!==s&&n.push(r)}return n}function ce(e,t){var n=Object.keys(t).reduce((function(e,n){var a=t[n].map((function(e){return e.id}));return new Set([].concat(Object(b["a"])(e),Object(b["a"])(a)))}),new Set),a=e.filter((function(e){return!n.has(e.id)}));return a}function ie(e,t){var n,a={},r=Object(se["a"])(e);try{for(r.s();!(n=r.n()).done;){var s=n.value;a[s]=oe(s,t)}}catch(c){r.e(c)}finally{r.f()}var o=ce(t,a);return{givenAnswersToValidVocabulary:a,unansweredVocabulary:o}}r["a"].use(s["a"]),r["a"].use(re.a);var ue=new s["a"].Store({state:{accessToken:"",username:"",level:1,kanaToVocabulary:{},currentKana:"",givenAnswersToValidVocabulary:{},unansweredVocabulary:[],numAnswered:0},getters:{getNumKanaToVocabulary:function(e){return Object.keys(e.kanaToVocabulary).length},expectedVocabulary:function(e){return e.kanaToVocabulary[e.currentKana]}},mutations:{setAccessToken:function(e,t){e.accessToken=t},setUserData:function(e,t){var n=t.username,a=t.level;if(e.username=n,e.level!==a){var r=1===e.level?"Initalize Vocabulary":"Update Vocabulary";console.log(r),e.level=a,this.commit("updateKanaToVocabulary")}},updateKanaToVocabulary:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var a,r,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=e.level-1,n.next=3,j(e.accessToken,a);case 3:r=n.sent,s=Object.keys(r).sort((function(e,t){return r[t].length-r[e].length})).reduce((function(e,t){return Object.assign(e,Object(ne["a"])({},t,r[t]))}),{}),e.kanaToVocabulary=s,t.commit("newKana");case 7:case"end":return n.stop()}}),n)})))()},newKana:function(e){var t=Object.keys(e.kanaToVocabulary);if(t.length){var n=t[e.numAnswered];e.currentKana=n}},giveAnswers:function(e,t){var n=e.kanaToVocabulary[e.currentKana],a=ie(t,n),r=a.givenAnswersToValidVocabulary,s=a.unansweredVocabulary;e.givenAnswersToValidVocabulary=r,e.unansweredVocabulary=s,e.numAnswered++}},actions:{},modules:{},plugins:[re()({keys:["accessToken","username"],namespace:"kaniwani",driver:re.a.drivers.localStorage})]});r["a"].config.productionTip=!1,new r["a"]({router:te,store:ue,mounted:function(){var e=this;this.$store.state.accessToken?k(this.$store.state.accessToken).then((function(t){e.setUserData(t.data)})):this.$router.push({path:"/kaniwani"})},methods:Object(a["a"])({},Object(s["b"])(["setUserData"])),render:function(e){return e(d)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.a1da7fb2.js.map